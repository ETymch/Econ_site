plot.margin = margin(25, 35, 15, 35),
plot.background = element_rect(fill = "white", color = 'white'),
plot.title = element_markdown(color = "grey35", size = 14, hjust = 0.5,
family = "HSE Sans", face = "bold",
lineheight = 1.2,),
plot.subtitle = element_markdown(color = "grey50", size = 12, hjust = 0.5,
lineheight = 1.2, family = 'HSE Sans'),
plot.caption = element_text(color = "grey35", size = 10, family = 'HSE Sans', face = 'italic'))
ggsave('transit_by_country.svg')
data %>%
ggplot() +
geom_sigmoid(
aes(x = -25, xend = 25,
y = rank_2021, yend = rank_2022,
group = country_ru,
color = rank_2022,
color = after_scale(colorspace::lighten(color, .4))),
alpha = .45, smooth = 8, size = 1.2
) +
## Точки на концах
geom_point(
aes(x = -25, y = rank_2021,
color = rank_2021,
color = after_scale(colorspace::desaturate(colorspace::lighten(color, .2), .2))),
size = 4,
shape = "|"
) +
geom_point(
aes(x = 25, y = rank_2022,
color = rank_2022,
color = after_scale(colorspace::desaturate(colorspace::lighten(color, .2), .2))),
size = 4,
shape = "|"
) +
geom_segment(
## make bars a bit shorter because of rounded lineends
aes(x = start_2021 - 2.5, xend = end_2021 + 1.1,
y = rank_2021, yend = rank_2021,
color = rank_2021,
color = after_scale(colorspace::lighten(color, .2))),
size = 4,
lineend = "round"
) +
geom_segment(
aes(x = start_2022 + 3, xend = end_2022 - 1.1,
y = rank_2022, yend = rank_2022,
color = rank_2022,
color = after_scale(colorspace::lighten(color, .2))),
size = 4,
lineend = "round"
) +
## label costs
geom_richtext(
aes(x = -25, y = rank_2021,
label = (total_2021 / 1000) %>% round(0)),
hjust = 1,
color = "grey50",
size = 3.5,
family = "HSE Sans",
fill = NA,
label.color = NA
) +
geom_richtext(
aes(x = 41, y = rank_2022,
label = (total_2022 / 1000) %>% round(0)),
hjust = 1,
color = "grey50",
size = 3.5,
family = "HSE Sans",
fill = NA,
label.color = NA
) +
geom_richtext(
aes(x = end_2021, y = rank_2021,
label = country_ru),
hjust = 1,
color = "grey35",
size = 3.5,
family = "HSE Sans",
nudge_x = -2,
fill = NA,
label.color = NA
) +
geom_text(
aes(x = end_2022 + 2, y = rank_2022,
label = country_ru),
hjust = 0,
color = "grey35",
size = 3.5,
family = "HSE Sans",
nudge_x = 2.5
) +
xlim(-100,90) +
coord_cartesian(clip = "off") + # Всегда используйте
scico::scale_color_scico(palette = "lapaz", direction = -1) + # одна из возможных палитр, советую библиотеку scico
labs(title = 'Россия: экспорт услуг по транспортировке грузов',
subtitle = '2021 - 2022',
caption = 'млн долл.') + # подписи осей
theme_void() + # тема без осей и пр.
theme(legend.position = "none", # легенда тут не нужна
plot.margin = margin(25, 35, 15, 35), # рамка вокруг графика
plot.background = element_rect(fill = "white", color = 'white'), # белый фон
plot.title = element_markdown(color = "grey35", size = 14, hjust = 0.5, # Заголовок - markdown. Можете изменить цвета внутри заголовка, если хотите
family = "HSE Sans", face = "bold",
lineheight = 1.2),
plot.subtitle = element_markdown(color = "grey50", size = 12, hjust = 0.5,
lineheight = 1.2, family = 'HSE Sans'),
plot.caption = element_text(color = "grey35", size = 10, family = 'HSE Sans', face = 'italic'))
data %>%
ggplot() +
geom_sigmoid( # Сигмоид
aes(x = -25, xend = 25, # горизонтальные координаты конца и начала можно задавать вручную. Я выбрал удобный вариант -25,25
y = rank_2021, yend = rank_2022, # Вертикальное положение кноцов сигмоида - ранг, который мы создавали дополнительно в табличке
group = country_ru,
color = rank_2022,
color = after_scale(colorspace::lighten(color, .4))),
alpha = .45, smooth = 8, size = 1.2
) +
geom_point( # Точки-палочки слева. Так красивее
aes(x = -25, y = rank_2021,
color = rank_2021,
color = after_scale(colorspace::desaturate(colorspace::lighten(color, .2), .2))),
size = 4,
shape = "|"
) +
geom_point( #Точки-палочки справа
aes(x = 25, y = rank_2022,
color = rank_2022,
color = after_scale(colorspace::desaturate(colorspace::lighten(color, .2), .2))),
size = 4,
shape = "|"
) +
geom_segment( # Линии
## make bars a bit shorter because of rounded lineends
aes(x = start_2021 - 2.5, xend = end_2021 + 1.1,
y = rank_2021, yend = rank_2021,
color = rank_2021,
color = after_scale(colorspace::lighten(color, .2))),
size = 4,
lineend = "round"
) +
geom_segment( # Линии
aes(x = start_2022 + 3, xend = end_2022 - 1.1,
y = rank_2022, yend = rank_2022,
color = rank_2022,
color = after_scale(colorspace::lighten(color, .2))),
size = 4,
lineend = "round"
) +
## label costs
geom_richtext( # подпись результатов слева
aes(x = -25, y = rank_2021,
label = (total_2021 / 1000) %>% round(0)), # цифры я округлил
hjust = 1,
color = "grey50",
size = 3.5,
family = "HSE Sans",
fill = NA,
label.color = NA
) +
geom_richtext( # Подпись результатов справа
aes(x = 41, y = rank_2022,
label = (total_2022 / 1000) %>% round(0)),
hjust = 1,
color = "grey50",
size = 3.5,
family = "HSE Sans",
fill = NA,
label.color = NA
) +
geom_richtext( # подпись страны слева
aes(x = end_2021, y = rank_2021,
label = country_ru),
hjust = 1,
color = "grey35",
size = 3.5,
family = "HSE Sans",
nudge_x = -2,
fill = NA,
label.color = NA
) +
geom_text( # Подпись страны справа
aes(x = end_2022 + 2, y = rank_2022,
label = country_ru),
hjust = 0,
color = "grey35",
size = 3.5,
family = "HSE Sans",
nudge_x = 2.5
) +
xlim(-100,90) +
coord_cartesian(clip = "off") + # Всегда используйте
scico::scale_color_scico(palette = "lapaz", direction = -1) + # одна из возможных палитр, советую библиотеку scico
labs(title = 'Россия: экспорт услуг по транспортировке грузов',
subtitle = '2021 - 2022',
caption = 'млн долл.') + # подписи осей
theme_void() + # тема без осей и пр.
theme(legend.position = "none", # легенда тут не нужна
plot.margin = margin(25, 35, 15, 35), # рамка вокруг графика
plot.background = element_rect(fill = "white", color = 'white'), # белый фон
plot.title = element_markdown(color = "grey35", size = 14, hjust = 0.5, # Заголовок - markdown. Можете изменить цвета внутри заголовка, если хотите
family = "HSE Sans", face = "bold", # тип текста заголовка - жирный
lineheight = 1.2),
plot.subtitle = element_markdown(color = "grey50", size = 12, hjust = 0.6, # подзаголовок
lineheight = 1.2, family = 'HSE Sans'),
plot.caption = element_text(color = "grey35", size = 10, family = 'HSE Sans', face = 'italic')) # тип текста подписи внизу - наклонный
data %>%
ggplot() +
geom_sigmoid( # Сигмоид
aes(x = -25, xend = 25, # горизонтальные координаты конца и начала можно задавать вручную. Я выбрал удобный вариант -25,25
y = rank_2021, yend = rank_2022, # Вертикальное положение кноцов сигмоида - ранг, который мы создавали дополнительно в табличке
group = country_ru,
color = rank_2022,
color = after_scale(colorspace::lighten(color, .4))),
alpha = .45, smooth = 8, size = 1.2
) +
geom_point( # Точки-палочки слева. Так красивее
aes(x = -25, y = rank_2021,
color = rank_2021,
color = after_scale(colorspace::desaturate(colorspace::lighten(color, .2), .2))),
size = 4,
shape = "|"
) +
geom_point( #Точки-палочки справа
aes(x = 25, y = rank_2022,
color = rank_2022,
color = after_scale(colorspace::desaturate(colorspace::lighten(color, .2), .2))),
size = 4,
shape = "|"
) +
geom_segment( # Линии
## make bars a bit shorter because of rounded lineends
aes(x = start_2021 - 2.5, xend = end_2021 + 1.1,
y = rank_2021, yend = rank_2021,
color = rank_2021,
color = after_scale(colorspace::lighten(color, .2))),
size = 4,
lineend = "round"
) +
geom_segment( # Линии
aes(x = start_2022 + 3, xend = end_2022 - 1.1,
y = rank_2022, yend = rank_2022,
color = rank_2022,
color = after_scale(colorspace::lighten(color, .2))),
size = 4,
lineend = "round"
) +
## label costs
geom_richtext( # подпись результатов слева
aes(x = -25, y = rank_2021,
label = (total_2021 / 1000) %>% round(0)), # цифры я округлил
hjust = 1,
color = "grey50",
size = 3.5,
family = "HSE Sans",
fill = NA,
label.color = NA
) +
geom_richtext( # Подпись результатов справа
aes(x = 41, y = rank_2022,
label = (total_2022 / 1000) %>% round(0)),
hjust = 1,
color = "grey50",
size = 3.5,
family = "HSE Sans",
fill = NA,
label.color = NA
) +
geom_richtext( # подпись страны слева
aes(x = end_2021, y = rank_2021,
label = country_ru),
hjust = 1,
color = "grey35",
size = 3.5,
family = "HSE Sans",
nudge_x = -2,
fill = NA,
label.color = NA
) +
geom_text( # Подпись страны справа
aes(x = end_2022 + 2, y = rank_2022,
label = country_ru),
hjust = 0,
color = "grey35",
size = 3.5,
family = "HSE Sans",
nudge_x = 2.5
) +
xlim(-100,90) +
coord_cartesian(clip = "off") + # Всегда используйте
scico::scale_color_scico(palette = "lapaz", direction = -1) + # одна из возможных палитр, советую библиотеку scico
labs(title = 'Россия: экспорт услуг по транспортировке грузов',
subtitle = '2021 - 2022',
caption = 'млн долл.') + # подписи осей
theme_void() + # тема без осей и пр.
theme(legend.position = "none", # легенда тут не нужна
plot.margin = margin(25, 35, 15, 35), # рамка вокруг графика
plot.background = element_rect(fill = "white", color = 'white'), # белый фон
plot.title = element_markdown(color = "grey35", size = 14, hjust = 0.5, # Заголовок - markdown. Можете изменить цвета внутри заголовка, если хотите
family = "HSE Sans", face = "bold", # тип текста заголовка - жирный
lineheight = 1.2),
plot.subtitle = element_markdown(color = "grey50", size = 12, hjust = 0.51, # подзаголовок
lineheight = 1.2, family = 'HSE Sans'),
plot.caption = element_text(color = "grey35", size = 10, family = 'HSE Sans', face = 'italic')) # тип текста подписи внизу - наклонный
data %>%
ggplot() +
geom_sigmoid( # Сигмоид
aes(x = -25, xend = 25, # горизонтальные координаты конца и начала можно задавать вручную. Я выбрал удобный вариант -25,25
y = rank_2021, yend = rank_2022, # Вертикальное положение кноцов сигмоида - ранг, который мы создавали дополнительно в табличке
group = country_ru,
color = rank_2022,
color = after_scale(colorspace::lighten(color, .4))),
alpha = .45, smooth = 8, size = 1.2
) +
geom_point( # Точки-палочки слева. Так красивее
aes(x = -25, y = rank_2021,
color = rank_2021,
color = after_scale(colorspace::desaturate(colorspace::lighten(color, .2), .2))),
size = 4,
shape = "|"
) +
geom_point( #Точки-палочки справа
aes(x = 25, y = rank_2022,
color = rank_2022,
color = after_scale(colorspace::desaturate(colorspace::lighten(color, .2), .2))),
size = 4,
shape = "|"
) +
geom_segment( # Линии
## make bars a bit shorter because of rounded lineends
aes(x = start_2021 - 2.5, xend = end_2021 + 1.1,
y = rank_2021, yend = rank_2021,
color = rank_2021,
color = after_scale(colorspace::lighten(color, .2))),
size = 4,
lineend = "round"
) +
geom_segment( # Линии
aes(x = start_2022 + 3, xend = end_2022 - 1.1,
y = rank_2022, yend = rank_2022,
color = rank_2022,
color = after_scale(colorspace::lighten(color, .2))),
size = 4,
lineend = "round"
) +
## label costs
geom_richtext( # подпись результатов слева
aes(x = -25, y = rank_2021,
label = (total_2021 / 1000) %>% round(0)), # цифры я округлил
hjust = 1,
color = "grey50",
size = 3.5,
family = "HSE Sans",
fill = NA,
label.color = NA
) +
geom_richtext( # Подпись результатов справа
aes(x = 41, y = rank_2022,
label = (total_2022 / 1000) %>% round(0)),
hjust = 1,
color = "grey50",
size = 3.5,
family = "HSE Sans",
fill = NA,
label.color = NA
) +
geom_richtext( # подпись страны слева
aes(x = end_2021, y = rank_2021,
label = country_ru),
hjust = 1,
color = "grey35",
size = 3.5,
family = "HSE Sans",
nudge_x = -2,
fill = NA,
label.color = NA
) +
geom_text( # Подпись страны справа
aes(x = end_2022 + 2, y = rank_2022,
label = country_ru),
hjust = 0,
color = "grey35",
size = 3.5,
family = "HSE Sans",
nudge_x = 2.5
) +
xlim(-100,90) +
coord_cartesian(clip = "off") + # Всегда используйте
scico::scale_color_scico(palette = "lapaz", direction = -1) + # одна из возможных палитр, советую библиотеку scico
labs(title = 'Россия: экспорт услуг по транспортировке грузов',
subtitle = '2021 - 2022',
caption = 'млн долл.') + # подписи осей
theme_void() + # тема без осей и пр.
theme(legend.position = "none", # легенда тут не нужна
plot.margin = margin(25, 35, 15, 35), # рамка вокруг графика
plot.background = element_rect(fill = "white", color = 'white'), # белый фон
plot.title = element_markdown(color = "grey35", size = 14, hjust = 0.5, # Заголовок - markdown. Можете изменить цвета внутри заголовка, если хотите
family = "HSE Sans", face = "bold", # тип текста заголовка - жирный
lineheight = 1.2),
plot.subtitle = element_markdown(color = "grey50", size = 12, hjust = 0.52, # подзаголовок
lineheight = 1.2, family = 'HSE Sans'),
plot.caption = element_text(color = "grey35", size = 10, family = 'HSE Sans', face = 'italic')) # тип текста подписи внизу - наклонный
data %>%
ggplot() +
geom_sigmoid( # Сигмоид
aes(x = -25, xend = 25, # горизонтальные координаты конца и начала можно задавать вручную. Я выбрал удобный вариант -25,25
y = rank_2021, yend = rank_2022, # Вертикальное положение кноцов сигмоида - ранг, который мы создавали дополнительно в табличке
group = country_ru,
color = rank_2022,
color = after_scale(colorspace::lighten(color, .4))),
alpha = .45, smooth = 8, size = 1.2
) +
geom_point( # Точки-палочки слева. Так красивее
aes(x = -25, y = rank_2021,
color = rank_2021,
color = after_scale(colorspace::desaturate(colorspace::lighten(color, .2), .2))),
size = 4,
shape = "|"
) +
geom_point( #Точки-палочки справа
aes(x = 25, y = rank_2022,
color = rank_2022,
color = after_scale(colorspace::desaturate(colorspace::lighten(color, .2), .2))),
size = 4,
shape = "|"
) +
geom_segment( # Линии
## make bars a bit shorter because of rounded lineends
aes(x = start_2021 - 2.5, xend = end_2021 + 1.1,
y = rank_2021, yend = rank_2021,
color = rank_2021,
color = after_scale(colorspace::lighten(color, .2))),
size = 4,
lineend = "round"
) +
geom_segment( # Линии
aes(x = start_2022 + 3, xend = end_2022 - 1.1,
y = rank_2022, yend = rank_2022,
color = rank_2022,
color = after_scale(colorspace::lighten(color, .2))),
size = 4,
lineend = "round"
) +
## label costs
geom_richtext( # подпись результатов слева
aes(x = -25, y = rank_2021,
label = (total_2021 / 1000) %>% round(0)), # цифры я округлил
hjust = 1,
color = "grey50",
size = 3.5,
family = "HSE Sans",
fill = NA,
label.color = NA
) +
geom_richtext( # Подпись результатов справа
aes(x = 41, y = rank_2022,
label = (total_2022 / 1000) %>% round(0)),
hjust = 1,
color = "grey50",
size = 3.5,
family = "HSE Sans",
fill = NA,
label.color = NA
) +
geom_richtext( # подпись страны слева
aes(x = end_2021, y = rank_2021,
label = country_ru),
hjust = 1,
color = "grey35",
size = 3.5,
family = "HSE Sans",
nudge_x = -2,
fill = NA,
label.color = NA
) +
geom_text( # Подпись страны справа
aes(x = end_2022 + 2, y = rank_2022,
label = country_ru),
hjust = 0,
color = "grey35",
size = 3.5,
family = "HSE Sans",
nudge_x = 2.5
) +
xlim(-100,90) +
coord_cartesian(clip = "off") + # Всегда используйте
scico::scale_color_scico(palette = "lapaz", direction = -1) + # одна из возможных палитр, советую библиотеку scico
labs(title = 'Россия: экспорт услуг по транспортировке грузов',
subtitle = '2021 - 2022',
caption = 'млн долл.') + # подписи осей
theme_void() + # тема без осей и пр.
theme(legend.position = "none", # легенда тут не нужна
plot.margin = margin(25, 35, 15, 35), # рамка вокруг графика
plot.background = element_rect(fill = "white", color = 'white'), # белый фон
plot.title = element_markdown(color = "grey35", size = 14, hjust = 0.5, # Заголовок - markdown. Можете изменить цвета внутри заголовка, если хотите
family = "HSE Sans", face = "bold", # тип текста заголовка - жирный
lineheight = 1.2),
plot.subtitle = element_markdown(color = "grey50", size = 12, hjust = 0.525, # подзаголовок
lineheight = 1.2, family = 'HSE Sans'),
plot.caption = element_text(color = "grey35", size = 10, family = 'HSE Sans', face = 'italic')) # тип текста подписи внизу - наклонный
ggsave('transit_by_country.svg')
data
data %>%
ggplot() +
geom_sigmoid( # Сигмоид
aes(x = -25, xend = 25, # горизонтальные координаты конца и начала можно задавать вручную. Я выбрал удобный вариант -25,25
y = rank_2021, yend = rank_2022, # Вертикальное положение кноцов сигмоида - ранг, который мы создавали дополнительно в табличке
group = country_ru,
color = rank_2022,
color = after_scale(colorspace::lighten(color, .4))),
alpha = .45, smooth = 8, size = 1.2
)
